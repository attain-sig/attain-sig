<apex:page controller="iCLightning.templatePreviewController" showheader="false" standardStylesheets="false">
    <apex:form >
        <apex:actionFunction name="validate" action="{!generateNewPreview}" reRender="outputIt">
            <apex:param name="firstParam" assignTo="{!newValueForPreview}" value="" />
        </apex:actionFunction>
        <apex:outputPanel id="outputIt">
            <apex:outputText value="{!htmlTemplatePreview}" escape="false" />
        </apex:outputPanel>
        <script type="text/javascript">
            window.onload = function () {
                let message = 'originURLForIFrame'+window.location.origin
                window.top.postMessage(message, '*')
            }
            window.onmessage = function (e) {
                try {
                    let newValue = e.data;
                    /*Below Method is generated by "apex:actionFunction" which will call Apex Method "generateNewPreview" */
                    validate(newValue);
                } catch (error) {
                    console.error(error);
                }

            };

        </script>

    </apex:form>


</apex:page>